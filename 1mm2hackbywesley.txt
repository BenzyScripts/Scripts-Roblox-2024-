local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")

local CoinsPaste = Workspace.Normal.CoinContainer:GetChildren()

local FarmBool = false

local function allCoinsInvisible()
    for _, coin in ipairs(CoinsPaste) do
        if coin:IsA("BasePart") and coin.Transparency > 0 then
            return false
        end
    end
    return true
end

local function teleportToRandomCoin()
    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    
    if #CoinsPaste == 0 then
        warn("Nenhum item encontrado no CoinsPaste")
        return
    end

    local randomIndex = math.random(1, #CoinsPaste)
    local randomCoin = CoinsPaste[randomIndex]
    
    if randomCoin and randomCoin:IsA("BasePart") then
        humanoidRootPart.CFrame = randomCoin.CFrame
    else
        warn("O item aleatório não é um BasePart")
    end
end

local function LoopFarm()
    CoinsPaste = Workspace.Normal.CoinContainer:GetChildren()
    while FarmBool==true do
        if allCoinsInvisible() then
            print("Todos os itens estão invisíveis. Parando o script.")
            break
        end
        
        teleportToRandomCoin()
        wait(4)
    end
end
---------------
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HCscripts"
screenGui.Parent = playerGui
local ScreenGuiAchar = playerGui:FindFirstChild("HCscripts")


local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.10, 0, 0.10, 0)
frame.Position = UDim2.new(0.0, 0, 0.80, 0)
frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
frame.Parent = screenGui

local button = Instance.new("TextButton")
button.Size = UDim2.new(0.6, 0, 0.25, 0)
button.Position = UDim2.new(0.20, 0, 0.4, 0)
button.Text = "AutoFarm: Off"
button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)

button.Parent = frame

local functionActive = false

local function toggleFunction()
    CoinsPaste = Workspace.Normal.CoinContainer:GetChildren()
    if functionActive==false then
        functionActive=true
        button.Text = "AutoFarm: ON"
        button.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        FarmBool = true
        LoopFarm()
    else
        functionActive=false
        print("AutoFarm!")
        button.Text = "AutoFarm: Off"
        button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        FarmBool = false
    end
end

button.MouseButton1Click:Connect(toggleFunction)

local UserInputService = game:GetService("UserInputService")

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.E then
        CoinsPaste = Workspace.Normal.CoinContainer:GetChildren()
        toggleFunction()
    end
end)